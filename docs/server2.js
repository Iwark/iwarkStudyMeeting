// Generated by CoffeeScript 1.6.3
(function() {
  var count, http, pages, path;

  http = require("http");

  path = require("path");

  count = 0;

  pages = [
    {
      route: 'plus',
      output: function() {
        return count += 1;
      }
    }, {
      route: 'minus',
      output: function() {
        return count -= 1;
      }
    }, {
      route: 'kakeru',
      output: function() {
        return count *= 2;
      }
    }, {
      route: 'waru',
      output: function() {
        return count /= 2;
      }
    }
  ];

  http.createServer(function(request, response) {
    var lookup;
    lookup = path.basename(decodeURI(request.url));
    return pages.forEach(function(page) {
      var result;
      if (page.route === lookup) {
        page.output();
        result = {
          number: "" + count
        };
        response.writeHead(200, {
          "content-Type": "text/json"
        });
        return response.end(JSON.stringify(result));
      }
    });
  }).listen(8080);

}).call(this);
